#include<stdio.h>


void imprimir_matriz(int sudoku [9][9], int fila, int columna);
void zeros(int sudoku[9][9], int fila, int columna);

int main()
{
    int x[8];
    int y[8];
    
    //Instrucciones para el usuario.
    printf("Bienvenido a la prueba de matematicas, en esta prueba deberas resolver un sudoku.\n");
    printf("Para ello deberas introducir primero el valor de la coordenada, donde quieras poner el valor.\n");
    printf("Siendo esto de esta forma, el eje vertical, sera 'y' y es el primer valor que debes introducir, la primera posicion sera 1, mientras que la ultima sera la 9, de arriba a abajo.\n");
    printf("Mientras que el eje horizontal, ira en el mismo sentido, de izquierda a derecha y de 1 a 9.\n");
    printf("Los ceros son los valores que debes cambiar para completar el sudoku.\n");
    printf("Tienes tres intentos.\n");
    
    //Declaracion del sudoku.
    int sudoku [9] [9];

    //Declaracion de variables.
    int fila, columna, a, b, fallo, i, j, acierto;
    
    //Llamada de funcion inicial.
    zeros(sudoku, 9, 9);
    
    //Son los valores que ya tiene el sudoku cuando se lo mostramos al usuario.
    sudoku[0][0]=7;
    sudoku[0][1]=5;
    sudoku[0][5]=4;
    sudoku[0][7]=9;
    sudoku[0][8]=2;
    sudoku[1][0]=6;
    sudoku[1][4]=2;
    sudoku[1][6]=3;
    sudoku[2][1]=2;
    sudoku[2][6]=5;
    sudoku[3][0]=1;
    sudoku[3][1]=3;
    sudoku[3][4]=7;
    sudoku[3][6]=8;
    sudoku[4][0]=2;
    sudoku[4][3]=8;
    sudoku[4][4]=1;
    sudoku[4][5]=3;
    sudoku[5][1]=6;
    sudoku[5][4]=4;
    sudoku[5][6]=7;
    sudoku[5][8]=1;
    sudoku[6][2]=7;
    sudoku[6][4]=5;
    sudoku[6][7]=6;
    sudoku[7][0]=5;
    sudoku[7][5]=1;
    sudoku[7][8]=3;
    sudoku[8][1]=1;
    sudoku[8][2]=2;
    sudoku[8][4]=8;
    sudoku[8][5]=6;
    sudoku[8][6]=9;
    sudoku[8][7]=7;
    
    //Sudoku solución
    int sudokusol [9][9]=
    {
        {7, 5, 8, 1, 3, 4, 6, 9, 2},
        {6, 9, 1, 5, 2, 8, 3, 4, 7},
        {4, 2, 3, 9, 6, 7, 5, 1, 8},
        {1, 3, 4, 6, 7, 5, 8, 2, 9},
        {2, 7, 9, 8, 1, 3, 4, 5, 6},
        {8, 6, 5, 2, 4, 9, 7, 3, 1},
        {9, 8, 7, 3, 5, 2, 1, 6, 4},
        {5, 4, 6, 7, 9, 1, 2, 8, 3},
        {3, 1, 2, 4, 8, 6, 9, 7, 5},
    };
    //Inicializamos las variables y le enseñamos el sudoku.
    acierto=0;
    fallo=0;
    fila=0;
    columna=0;
    imprimir_matriz(sudoku, 9, 9);
    
    //Hacemos que el usuario nos de todos los datos necesarios para completar el sudoku
    //Comprobamos los valores que nos da con los valores que tenemos guardados en la matriz solución.
    //Pararemos el bucle cuando falle 3 veces o cuando nos introduzca un cero.
    do
    {
        printf("Dame el valor de la fila primero y después de la columna, donde quieras introducir el valor.\n");
        scanf("%d %d", &a, &b);
        fila=a-1;
        columna=b-1;
        printf("Ahora deme el valor que desee introducir.\n");
        scanf("%d", &i);
        sudoku[fila][columna]=i;
        j=sudokusol[fila][columna];
        if(i!=j)
        {
            fallo=fallo+1;
            printf("Has fallado, te queda un intento menos.\n");
            if(fallo==3)
            {
                printf("Has perdido.\n");
            }
        }
        printf("Para finalizar programa pulse 0.\n");
        imprimir_matriz(sudoku, 9, 9);
    }
    while((sudoku[fila][columna]!=0) && (fallo !=3));
    //Miramos el número de aciertos
    for(i=0; i<9; i++)
    {
        for (j=0; j<9; j++)
        {
            if(sudoku[i][j]==sudokusol[i][j])
            {
                acierto=acierto+1;
            }
        }
    }
    //Comprobamos el sudoku
    if(acierto==81)
    {
        printf("Felicidades has pasado la prueba, aqui tienes la llave de matemáticas.\n");
    }
    else
    {
        printf("Lo siento pero has fallado.\n");
    }
    return 0;
}
//Convertir todos los huecos en ceros.
void zeros(int sudoku[9][9], int fila, int columna)
{
    int i=0, j=0;
    for (i=0; i<= 9; i++)
    {
        for (j=0; j<= 9; j++)
        {
            sudoku[i][j]=0;
        }
    }
}
//Funcion para ver los cambios de la matriz.
void imprimir_matriz(int sudoku[9][9], int fila, int columna)
{
    printf("   1   2   3    4   5   6     7   8   9\n");
    printf("  ______________________________________\n");
    printf(" |           |             |            |\n");
    printf("1| 7   5   %d |  %d   %d   4  |  %d   9   2 |\n", sudoku[0][2], sudoku[0][3], sudoku[0][4], sudoku[0][6]);
    printf(" |           |             |            |\n");
    printf("2| 6   %d   %d |  %d   2   %d  |  3   %d   %d |\n", sudoku[1][1], sudoku[1][2], sudoku[1][3], sudoku[1][5], sudoku[1][7], sudoku[1][8]);
    printf(" |           |             |            |\n");
    printf("3| %d   2   %d |  %d   %d   %d  |  5   %d   %d |\n", sudoku[2][0], sudoku[2][2], sudoku[2][3], sudoku[2][4], sudoku[2][5], sudoku[2][7], sudoku[2][8]);
    printf(" |-----------|-------------|------------|\n");
    printf("4| 1   3   %d |  %d   7   %d  |  8   %d   %d |\n", sudoku[3][2], sudoku[3][3], sudoku[3][5], sudoku[3][7], sudoku[3][8]);
    printf(" |           |             |            |\n");
    printf("5| 2   %d   %d |  8   1   3  |  %d   %d   %d |\n", sudoku[4][1], sudoku[4][2], sudoku[4][6], sudoku[4][7], sudoku[4][8]);
    printf(" |           |             |            |\n");
    printf("6| %d   6   %d |  %d   4   %d  |  7   %d   1 |\n", sudoku[5][0], sudoku[5][2], sudoku[5][3], sudoku[5][5], sudoku[5][7]);
    printf(" |-----------|-------------|------------|\n");
    printf("7| %d   %d   7 |  %d   5   %d  |  %d   6   %d |\n", sudoku[6][0], sudoku[6][1], sudoku[6][3], sudoku[6][5], sudoku[6][6], sudoku[6][8]);
    printf(" |           |             |            |\n");
    printf("8| 5   %d   %d |  %d   %d   1  |  %d   %d   3 |\n", sudoku[7][1], sudoku[7][2], sudoku[7][3], sudoku[7][4], sudoku[7][6], sudoku[7][7]);
    printf(" |           |             |            |\n");
    printf("9| %d   1   2 |  %d   8   6  |  9   7   %d |\n", sudoku[8][0], sudoku[8][3], sudoku[8][8]);
    printf(" |___________|_____________|____________|\n");
}

